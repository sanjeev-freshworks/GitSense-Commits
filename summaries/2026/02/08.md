# Activity Summary for 2/8/2026

## 1:47:47 PM
The log primarily details updates to a markdown file, `/Users/skumar14/workspace/Freshservice/Personal Use/Post Grooming.md`, with a timestamp of 2/8/2026, 9:27:19 AM.

This file serves as a detailed design and grooming document, outlining logic and tasks for several features:

*   **Notification Burst Logic**: A significant portion details the implementation of a "Notification Burst" feature. It describes how to detect a burst (C notifications within T time) using a deque (double-ended queue) and manage the display of a special notification. The logic includes step-by-step examples (e.g., T0 through T4 notifications), specific parameters (T=15, C=3), and a boolean flag (`isSpecialNotificationShown`) to control the visibility of the special notification, ensuring it's not shown repeatedly during a single burst. There's a specific discussion on how notification arrival times relate to the burst criteria.
*   **App Review and Rating Prompt**: This section outlines the conditions for showing an in-app review prompt. Key points include resetting a counter after the prompt is shown, a 90-day cooldown period before the counter starts incrementing again, and continuous incrementing if the prompt hasn't been shown yet. It also lists TODOs for testing the existing code, refactoring `AppReviewManager` and `AppStore`, and specific conditions for when the prompt should or shouldn't increment or be displayed (e.g., not for solution articles in browser, immediately on logic achievement).
*   **General Development Tasks and Questions**: The document includes various to-do items and discussions covering broader development aspects:
    *   **Notification enhancements**: Suggestions for making special notifications more configurable (e.g., multiple shows, ID, position, icon, click events), managing account IDs, and renaming `NotificationBurstItem`.
    *   **Technical Refinements**: Tasks like replacing `png` with `svg`, handling MDM browser configuration rotation, and investigating `gson` injection in `NotificationBurstConverter`.
    *   **Design Discussions**: A clear pattern of "Unanswered" and "Answered" questions addresses architectural decisions (e.g., module separation, API call frequency, PR strategy for refactoring), implementation details (e.g., asset validity for changes, agent ticket creation, on-call detection), and data persistence (e.g., shared preferences for counts, data loss on uninstall).

**Patterns and Recurring Elements**:
The document uses a structured format with "Todo / suggestions:", bullet points for tasks, and clearly delineated "Questions: Unanswered" and "Answered" sections. The continuous refinement of logic, particularly for notification bursts, with specific examples and edge cases, is a recurring theme. There's a strong emphasis on user experience (notification display, app review prompt) and robust implementation (refactoring, testing, handling different scenarios).

## 2:51:47 PM
The log details changes to `/Users/skumar14/workspace/Freshservice/Personal Use/Post Grooming.md` on `2/8/2026, 9:27:19 AM`.

The primary focus of the changes revolves around two main features:

**1. Notification Burst Logic:**
- **Core Concept:** A system to identify and handle "bursts" of notifications, defined by receiving `C` notifications within a time window `T`.
- **Implementation Details:** Utilizes a deque (double-ended queue) to store notification timestamps.
    - When `deque.length < C`, notifications are treated as normal.
    - When `deque.length >= C` and the time difference between the newest and oldest notification is less than `T`, it's considered a burst.
    - A `isSpecialNotificationShown` flag ensures a "special notification" for a burst is shown only once. Subsequent notifications within the same burst are either discarded or result in no action.
    - If the time threshold `T` is exceeded, the burst state is reset, and the special notification flag is cleared.
- **Examples and Edge Cases:** Demonstrates logic with `T=15, C=3` and various timestamp sequences, clarifying how different scenarios (e.g., `T14 - T0 < T` vs. `T28 - T5 >= T`) are handled to adhere to acceptance criteria.
- **Todo/Suggestions:** Numerous improvements are suggested, including showing special notifications more than once, controlling their position and ID, testing with double account IDs, automating notifications, refactoring the deque logic, injecting `gson`, displaying account names/icons for special notifications, adding click events, utilizing a `count` variable, and renaming `NotificationBurstItem` to `SafeNotificationItem`. Setters and getters for `shouldShowSpecialNotification` and `accountId` in `ListNotificationViewModel` are also proposed.

**2. App Review and Rating Prompt:**
- **Core Logic:** Manages when an in-app review prompt should be shown.
    - The prompt counter resets for all logic and does not increment for 90 days after a prompt is shown.
    - After the 90-day period expires, the counter resumes incrementing.
    - If the prompt has not yet been shown, the counter continuously increments.
- **Todos and Refactoring:**
    - Test the existing app review code for functionality.
    - Refactor `AppReviewManager` and `AppStore` classes.
    - Ensure the prompt is shown immediately on the page where its display conditions are met.
    - Prevent incrementing the counter for solution articles when accessed via a browser.
    - For "seen" events, show the prompt under specific user conditions (sentence incomplete).
- **Questions and Answers:**
    - Module placement: Keeping it in the core module is acceptable.
    - `update tasks api` being called twice: Should be fixed.
    - Adding assets to tickets is valid for changes/closing.
    - Agents can create tickets.
    - "Different" detection is not needed.
    - Data loss on uninstall is acceptable.
    - A separate PR for refactoring is recommended.
    - Recognizing an on-call user is not required; incrementing when `ShiftEventActivity` is opened is sufficient.
    - Keep the feature persona-independent and use shared preferences for counts (no need for account-wise or unique counts).
    - The app review prompt should be triggered on any screen when conditions are met, moving the logic from `HomeActivity` to `AppReviewManager`.

**Other Updates:**
- There's an unpushed commit to replace PNG images with SVG.
- Notes on handling rotation for MDM Browser Config.
- A general task to replace/update existing special notifications, likely related to the burst logic.

**Patterns/Recurring Elements:**
- The document is structured as a grooming session or a detailed design discussion, evident from the "Post Grooming" title, the in-depth logic explanation, and the "Todo/suggestions" and "Questions" sections.
- It frequently uses a "deque" or "linkedlist" as the data structure for managing notification timestamps.
- There's a consistent focus on user experience through notifications (bursts, special notifications) and user engagement (app reviews).
- The language suggests a mobile application context (e.g., `ListNotificationViewModel`, `HomeActivity`, `AppReviewManager`, `R.string.special_notification`).
- The use of `*-` and `##` indicates a markdown-formatted document for planning and tracking.

## 4:24:35 PM
The `/Users/skumar14/workspace/Freshservice/Personal Use/Post Grooming.md` file, last updated on 2/8/2026 at 9:27:19 AM, primarily outlines a detailed logic for managing "Notification Bursts."

The core of the document describes a system using a deque (doubly-ended queue) to detect bursts of notifications. This system tracks notifications based on two parameters: `T` (time threshold) and `C` (count threshold). It specifies how notifications are pushed to the front of the deque and popped from the back. The logic details conditions for when a "special notification" should be shown (if `C` notifications arrive within `T` time), when subsequent burst notifications should be discarded, and when the deque should be cleared and the `isSpecialNotificationShown` flag reset if the time threshold is exceeded. Multiple examples with specific timestamps are provided to illustrate how notifications (`T0`, `T5`, `T13`, `T14`, `T28`) would be processed and whether they would trigger a burst.

Beyond the burst notification logic, the document also lists several "Todo / suggestions" related to:
*   Enhancing special notifications (showing more than once, managing ID and position, icon display, adding click events, and ensuring `isSpecialNotificationShown` and `accountId` have setters/getters in `ListNotificationViewModel`).
*   Refining the deque/linked list reset logic and considering `gson` injection.
*   Renaming `NotificationBurstItem` to `SafeNotificationItem`.

Other topics briefly mentioned include:
*   Commits related to replacing `png` with `svg`.
*   Handling rotation for MDM Browser Config.
*   Detailed logic for an "App review and Rating Prompt," covering when the counter should reset (after prompt shown for 90 days), when it should increment, and TODOs for testing, refactoring `AppReviewManager` and `AppStore`.
*   A section of "Questions," both unanswered (e.g., module separation, duplicate API calls) and answered (e.g., asset validity for changes, agent ticket creation, PR strategy for refactoring, using shared preferences for counts). Recurring patterns include a focus on notification display, state management (`isSpecialNotificationShown`), and queue-based processing.

## 5:24:39 PM
The file `/Users/skumar14/workspace/Freshservice/Personal Use/Post Grooming.md`, last modified on 2/8/2026 at 9:27:19 AM, primarily details two main feature discussions and their associated development tasks and questions: a "Notification Burst" mechanism and "App Review and Rating Prompt" logic.

**File-Specific Updates:**

*   **Notification Burst Logic:** This section outlines a detailed algorithm for identifying a "notification burst" using a deque (or linked list) to track recent notifications.
    *   It defines thresholds `T` (time) and `C` (count) to determine if `C` notifications have been received within a `T` time window.
    *   A boolean flag, `isSpecialNotificationShown`, is used to control the display of a special notification, ensuring it's shown only once per burst or handled appropriately.
    *   The logic differentiates between showing normal notifications, special notifications, discarding notifications during a burst, and resetting the deque when the burst condition is no longer met.
    *   Several examples with specific timestamps (`T0, T5, T13, T14, T28`, etc.) and deque states are provided to illustrate the burst detection and special notification triggering process.
    *   A set of "Todo / suggestions" indicates areas for refinement, including how often special notifications should appear, their positioning and ID control, testing for specific scenarios (double account IDs), automation, refining deque reset logic, injecting `gson`, displaying account names/icons for special notifications, adding click events, checking `count` usage, and adding setters/getters for `ListNotificationViewModel` properties. A suggestion to rename `NotificationBurstItem` to `SafeNotificationItem` is also present.
*   **App Review and Rating Prompt:** This section defines the rules for when the in-app review prompt should be shown.
    *   The counter for the prompt should reset and not increment for 90 days after the prompt is shown.
    *   After 90 days, incrementing should resume.
    *   If the prompt hasn't been shown, the counter continues to increment.
    *   Associated "App Review TODOs" include testing the existing code, refactoring `AppReviewManager` and `AppStore`, showing the prompt immediately when conditions are met, not incrementing for browser cases in solution articles, and handling "seen" events.
*   **Other Development Tasks:**
    *   Brief mentions of a branch for replacing PNG with SVG (commit not yet pushed) and updating existing special notifications related to MDM Browser Config and rotation.
*   **Questions and Answers:**
    *   A list of "Unanswered" and "Answered" questions covers architectural decisions (module placement, `update tasks api` calls), business logic (asset validation for changes/closings, agent ticket creation, "different" detection), data persistence (uninstall data loss), development workflow (separate PR for refactoring), and implementation details (on-call detection, shared preferences usage, prompt display location).

**Patterns and Recurring Elements:**

*   **State Management:** Both the notification burst and app review features heavily rely on tracking internal state (`isSpecialNotificationShown`, prompt counters, deque contents) to drive their logic.
*   **Threshold-based Logic:** The notification burst uses specific time (`T`) and count (`C`) thresholds, while the app review prompt uses a 90-day period.
*   **Detailed Examples and Scenarios:** The document extensively uses examples with specific values (timestamps, deque states) to clarify complex logic, particularly for the notification burst.
*   **Extensive TODOs and Questions:** The presence of numerous "Todo / suggestions" and a detailed "Questions" section (both answered and unanswered) indicates that this document serves as a planning, grooming, and discussion log, highlighting ongoing development, refinement, and decision-making processes for these features.
*   **Focus on User Experience:** Both features aim to manage notifications and prompts in a way that enhances the user experience, preventing overload (notification burst) and prompting for reviews at appropriate times (app review prompt).