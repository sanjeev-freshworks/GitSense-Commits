# Activity Summary for 4/7/2025

## 8:17:17 AM
The script `/Users/skumar14/PersonalLearning/MitmProxyScripts/freshservice_mitm.py`, last modified on 4/7/2025, 7:52:11 AM, is a Mitmproxy script designed to intercept and modify Freshservice API requests and responses.

The script's `InterceptFreshservice` class contains three main methods: `websocket_message`, `request`, and `response`.

The `websocket_message` method intercepts websocket messages, specifically targeting messages containing a "msg" key in the JSON payload. If found, it manipulates the message to inject an error response indicating "TOO_MANY_REQUESTS".

The `request` method focuses on modifying requests to the URL containing  "api/_/catalog/service-items/18/additional-items".  Specifically, if the `page` query parameter is 2, it changes it to 5.

The `response` method contains multiple functions (`changeAdditionalItems`, `updateAdditionalItems`, `changeResponseDirectly`) all operating on responses from the same URL ("api/_/catalog/service-items/18/additional-items").  `changeAdditionalItems` alters the name of the first service item to "Sanjeev Kumar".  `updateAdditionalItems` duplicates the `service_items` array, appending the duplicated items to the original and incrementing the `display_id` of each item. `changeResponseDirectly` completely replaces the response body with a simple JSON object `{"hello": "hi"}`.  The script currently calls only `changeResponseDirectly` leaving the other two commented out.

The script uses extensive logging (`ctx.log.warn`) for debugging purposes.  The consistent target URL ("api/_/catalog/service-items/18/additional-items") suggests a focus on manipulating specific data within Freshservice's service item catalog.  The manipulation techniques range from simple query parameter changes to complex data structure modifications and complete response overwrites.
